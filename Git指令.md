



# Git的使用

## 1.本地仓库

### 1.1组成

![image-20210727135231650](.images/image-20210727135231650-1627435224598124.png)



工作流程：

![image-20210727135207424](.images/image-20210727135207424-1627435226039125.png)



### 1.2本地仓库操作

![image-20210727135837927](.images/image-20210727135837927-1627435229327127.png)

![image-20210727135856897](.images/image-20210727135856897-1627435228120126.png)



![image-20210727140004081](C:\Users\10592\AppData\Roaming\Typora\typora-user-images\image-20210727140004081.png)

a.创建空目录

![image-20210727140222087](.images/image-20210727140222087-1627435231544128.png)

 

b.进入目录



c.Git仓库的初始化

**指令：git init**

![image-20210727140724374](.images/image-20210727140724374-1627435233455129.png)



![image-20210727141156561](.images/image-20210727141156561-1627435235431130.png)

![image-20210727141330192](.images/image-20210727141330192-1627435236800131.png)

后续操作，重复使用git add和git commit即可。

**如果更改文件内容，git add 文件名，git commit -m "修复了...的bug"**



### 1.3时光穿梭机--版本回退

![image-20210727142159303](.images/image-20210727142159303-1627435238841132.png)



**git log:**

![image-20210727142346755](.images/image-20210727142346755-1627435240296133.png)



**git log --pretty=online:**

![image-20210727142511657](.images/image-20210727142511657-1627435241703134.png)



操作实验：

![image-20210727142703038](.images/image-20210727142703038-1627435243167135.png)

![image-20210727142726360](.images/image-20210727142726360-1627435245055136.png)

![image-20210727142747438](.images/image-20210727142747438-1627435246111137.png)

![image-20210727142836464](.images/image-20210727142836464-1627435247735138.png)



注意：回到过去之后，要想回到之前的最新版本的时候回，则需要使用指令去查看历史操作

，以得到最新的commit id。

**指令：git reflog**

![image-20210727150034355](.images/image-20210727150034355-1627435249102139.png)



小结：

a.要想回到过去，必须先得到commit id(git log --pretty=online)，然后通过git reset-hard进行回退

b.要想回到未来，需要使用git reflog进行历史操作查看，得到最新的commit id；

c.在写回退指令的时候commit id可以不用写全，git自动识别，但是不能写太少，至少需要写4位字符。







## 2.远程仓库

线上仓库的操作学习以Github为例。



### 2.1远程仓库的创建

![image-20210727152428709](.images/image-20210727152428709-1627435250864140.png)





### 2.2两种常规使用方式

#### 2.2.1.基于http协议



![image-20210727160434899](.images/image-20210727160434899-1627435252887141.png)





a.创建空目录，名称就为

![image-20210727161054088](.images/image-20210727161054088-1627435254176142.png)

b.使用clone指令克隆线上仓库到本地

**语法：git clone https://github.com/wangyaxin1998/WaterLevelMeasurement.git**

![image-20210727161625344](.images/image-20210727161625344-1627435255625143.png)

![image-20210727161605532](.images/image-20210727161605532-1627435256502144.png)



c.在仓库上做对应的操作（提交缓存区、提交本地仓库、提交线上仓库、拉取线上仓库）

**提交到线上仓库的指令：git push**![image-20210727162839039](.images/image-20210727162839039-1627435257920145.png)



在首次往线上仓库提交内容的时候，不是任何人都可以往线上仓库提交内容，必须需要鉴权



修改 git/config 文件内容

![image-20210727163233838](.images/image-20210727163233838-1627435259423146.png)

![image-20210727163329211](.images/image-20210727163329211-1627435260888147.png)

![image-20210727163920198](.images/image-20210727163920198-1627435262239148.png)



如果另外的人在线上更改仓库内容：

**拉取线上仓库：git pull**

**提醒：每天工作的第一件事就是先git pull拉取线上最新的版本；每天下班前要做的是git push，将本地代码提交到线上仓库**



#### 2.2.2.基于ssh协议

![image-20210727165436902](.images/image-20210727165436902-1627435265561149.png)

![image-20210727165419873](.images/image-20210727165419873-1627435266918150.png)



②创建公私钥对文件

![image-20210727170414536](.images/image-20210727170414536-1627435269824151.png)

![image-20210727170714538](.images/image-20210727170714538-1627435271311152.png)



![image-20210727165935685](.images/image-20210727165935685-1627435272895153.png)

